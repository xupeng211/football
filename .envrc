#!/bin/bash
# è‡ªåŠ¨è™šæ‹Ÿç¯å¢ƒæ¿€æ´»ï¼ˆdirenvï¼‰
# AIå¼€å‘å·¥å…·ä¼šè‡ªåŠ¨ä½¿ç”¨æ­¤é…ç½®

# æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒ
if [ ! -d ".venv" ]; then
    echo "ğŸ”§ åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ..."
    python -m venv .venv
fi

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate

# è®¾ç½®æç¤ºç¬¦
export VIRTUAL_ENV_PROMPT="ğŸ¤– AI-DEV"

# æ˜¾ç¤ºç¯å¢ƒä¿¡æ¯
echo "ğŸ¤– AIå¼€å‘ç¯å¢ƒå·²æ¿€æ´»"
echo "Python: $(python --version)"
echo "Virtual Environment: $VIRTUAL_ENV"

# æ£€æŸ¥ä¾èµ–
if [ -f "requirements.txt" ] && ! python -c "import fastapi" 2>/dev/null; then
    echo "âš ï¸  ä¾èµ–æœªå®‰è£…ï¼Œè¯·è¿è¡Œ: make install"
fi
