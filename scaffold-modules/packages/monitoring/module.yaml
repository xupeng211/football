# ğŸ“Š ç›‘æ§åˆ†ææ¨¡å—é…ç½®
# Monitoring Module - å…¨æ–¹ä½ç³»ç»Ÿç›‘æ§å’Œåˆ†æ

name: "monitoring"
display_name: "ğŸ“Š ç›‘æ§åˆ†ææ¨¡å—"
version: "2.0.0"
description: "å…¨æ–¹ä½ç³»ç»Ÿç›‘æ§ï¼ŒåŒ…å«å¥åº·æ£€æŸ¥ã€æ€§èƒ½ç›‘æ§ã€æ—¥å¿—åˆ†æç­‰"

# æ¨¡å—ç±»å‹
type: "feature"
required: false

# ä¾èµ–å…³ç³»
dependencies:
  - "core"
  - "testing" # ç›‘æ§æ¨¡å—ä¾èµ–æµ‹è¯•æ¨¡å—è¿›è¡Œè´¨é‡ç›‘æ§

# å†²çªæ¨¡å—
conflicts: []

# æ¨¡å—æ–‡ä»¶åˆ—è¡¨
files:
  # ç›‘æ§è„šæœ¬
  - src: "scripts/health-check.py"
    dest: "scripts/health-check.py"
    type: "script"
    description: "ç³»ç»Ÿå¥åº·æ£€æŸ¥å·¥å…·"

  - src: "scripts/ci-dashboard.py"
    dest: "scripts/ci-dashboard.py"
    type: "script"
    description: "CIä»ªè¡¨æ¿ç”Ÿæˆå™¨"

  - src: "scripts/performance-monitor.py"
    dest: "scripts/performance-monitor.py"
    type: "script"
    description: "æ€§èƒ½ç›‘æ§å·¥å…·"

  - src: "scripts/log-analyzer.py"
    dest: "scripts/log-analyzer.py"
    type: "script"
    description: "æ—¥å¿—åˆ†æå·¥å…·"

  # ç›‘æ§é…ç½®
  - src: "monitoring/prometheus.yml"
    dest: "monitoring/prometheus.yml"
    type: "config"
    description: "Prometheusç›‘æ§é…ç½®"

  - src: "monitoring/alerts.yml"
    dest: "monitoring/alerts.yml"
    type: "config"
    description: "å‘Šè­¦è§„åˆ™é…ç½®"

  # Grafanaä»ªè¡¨æ¿
  - src: "monitoring/grafana-dashboards/system-overview.json"
    dest: "monitoring/grafana-dashboards/system-overview.json"
    type: "config"
    description: "ç³»ç»Ÿæ¦‚è§ˆä»ªè¡¨æ¿"

  - src: "monitoring/grafana-dashboards/ci-metrics.json"
    dest: "monitoring/grafana-dashboards/ci-metrics.json"
    type: "config"
    description: "CIæŒ‡æ ‡ä»ªè¡¨æ¿"

  # GitHub Actionså·¥ä½œæµ
  - src: ".github/workflows/notify-on-failure.yml"
    dest: ".github/workflows/notify-on-failure.yml"
    type: "workflow"
    description: "å¤±è´¥é€šçŸ¥å·¥ä½œæµ"

  # é…ç½®æ–‡ä»¶
  - src: "configs/logging-config.yaml"
    dest: "configs/logging-config.yaml"
    type: "config"
    description: "æ—¥å¿—é…ç½®æ–‡ä»¶"

  - src: "configs/metrics-config.yaml"
    dest: "configs/metrics-config.yaml"
    type: "config"
    description: "æŒ‡æ ‡é…ç½®æ–‡ä»¶"

# å®‰è£…åæ‰§è¡Œçš„å‘½ä»¤
post_install:
  commands:
    - "chmod +x scripts/health-check.py scripts/ci-dashboard.py scripts/performance-monitor.py scripts/log-analyzer.py"
    - "mkdir -p monitoring/grafana-dashboards logs reports"
    - "pip install prometheus-client grafana-api --quiet"

  messages:
    - "ğŸ‰ ç›‘æ§åˆ†ææ¨¡å—å®‰è£…å®Œæˆï¼"
    - "ğŸ“Š ç³»ç»Ÿç›‘æ§å’Œåˆ†æå·¥å…·å·²å°±ç»ª"
    - "ğŸ” è¿è¡Œ python scripts/health-check.py è¿›è¡Œå¥åº·æ£€æŸ¥"
    - "ğŸ“ˆ ä½¿ç”¨ python scripts/ci-dashboard.py ç”Ÿæˆä»ªè¡¨æ¿"
    - "âš¡ æŸ¥çœ‹ monitoring/ ç›®å½•äº†è§£ç›‘æ§é…ç½®"

# ç³»ç»Ÿè¦æ±‚
requirements:
  python: ">=3.11"
  pip_packages:
    - "prometheus-client>=0.17.0"
    - "grafana-api>=1.0.0"
    - "psutil>=5.9.0"
    - "requests>=2.28.0"

# åŠŸèƒ½ç‰¹æ€§
features:
  - "system_monitoring"
  - "performance_analysis"
  - "health_checks"
  - "log_analysis"
  - "alerting_system"
  - "dashboard_generation"

# ä¼°ç®—æŒ‡æ ‡
metrics:
  files_count: 11
  install_time_seconds: 60
  setup_complexity: "medium"
  maintenance_effort: "low"

# ä½¿ç”¨å»ºè®®
usage_tips:
  - "å®šæœŸè¿è¡Œå¥åº·æ£€æŸ¥ç¡®ä¿ç³»ç»Ÿæ­£å¸¸"
  - "ç›‘æ§å…³é”®æ€§èƒ½æŒ‡æ ‡å’Œèµ„æºä½¿ç”¨"
  - "é…ç½®å‘Šè­¦è§„åˆ™åŠæ—¶å‘ç°é—®é¢˜"
  - "ä½¿ç”¨ä»ªè¡¨æ¿å¯è§†åŒ–ç³»ç»ŸçŠ¶æ€"

# ç‰ˆæœ¬å†å²
changelog:
  "2.0.0":
    - "å¢å¼ºç›‘æ§åŠŸèƒ½"
    - "Grafanaä»ªè¡¨æ¿é›†æˆ"
    - "æ™ºèƒ½å‘Šè­¦ç³»ç»Ÿ"
  "1.0.0":
    - "åŸºç¡€ç›‘æ§åŠŸèƒ½"
