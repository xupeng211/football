# ğŸ§ª æµ‹è¯•æ¡†æ¶æ¨¡å—é…ç½®
# Testing Module - å®Œæ•´çš„æµ‹è¯•æ¡†æ¶å’Œè¦†ç›–ç‡ç›‘æ§

name: "testing"
display_name: "ğŸ§ª æµ‹è¯•æ¡†æ¶æ¨¡å—"
version: "2.0.0"
description: "å®Œæ•´çš„æµ‹è¯•æ¡†æ¶ï¼ŒåŒ…å«å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€è¦†ç›–ç‡ç›‘æ§ç­‰"

# æ¨¡å—ç±»å‹
type: "feature"
required: false

# ä¾èµ–å…³ç³»
dependencies:
  - "core"

# å†²çªæ¨¡å—
conflicts: []

# æ¨¡å—æ–‡ä»¶åˆ—è¡¨
files:
  # æµ‹è¯•è¿è¡Œè„šæœ¬
  - src: "scripts/run_tests.py"
    dest: "scripts/run_tests.py"
    type: "script"
    description: "æ™ºèƒ½æµ‹è¯•è¿è¡Œå™¨"

  - src: "scripts/smart-test.py"
    dest: "scripts/smart-test.py"
    type: "script"
    description: "æ™ºèƒ½æµ‹è¯•ç­–ç•¥"

  - src: "scripts/coverage-monitor.py"
    dest: "scripts/coverage-monitor.py"
    type: "script"
    description: "è¦†ç›–ç‡ç›‘æ§å·¥å…·"

  # æµ‹è¯•é…ç½®æ–‡ä»¶
  - src: ".coveragerc"
    dest: ".coveragerc"
    type: "config"
    description: "æµ‹è¯•è¦†ç›–ç‡é…ç½®"

  - src: "pytest.ini"
    dest: "pytest.ini"
    type: "config"
    description: "pytestæµ‹è¯•é…ç½®"

  # GitHub Actionså·¥ä½œæµ
  - src: ".github/workflows/test-comprehensive.yml"
    dest: ".github/workflows/test-comprehensive.yml"
    type: "workflow"
    description: "å…¨é¢æµ‹è¯•å·¥ä½œæµ"

  - src: ".github/workflows/coverage-alert.yml"
    dest: ".github/workflows/coverage-alert.yml"
    type: "workflow"
    description: "è¦†ç›–ç‡è­¦æŠ¥å·¥ä½œæµ"

  # æµ‹è¯•æ¨¡æ¿
  - src: "test-templates/unit_test.template.py"
    dest: "test-templates/unit_test.template.py"
    type: "template"
    description: "å•å…ƒæµ‹è¯•æ¨¡æ¿"

  - src: "test-templates/integration_test.template.py"
    dest: "test-templates/integration_test.template.py"
    type: "template"
    description: "é›†æˆæµ‹è¯•æ¨¡æ¿"

  - src: "test-templates/e2e_test.template.py"
    dest: "test-templates/e2e_test.template.py"
    type: "template"
    description: "ç«¯åˆ°ç«¯æµ‹è¯•æ¨¡æ¿"

# å®‰è£…åæ‰§è¡Œçš„å‘½ä»¤
post_install:
  commands:
    - "chmod +x scripts/run_tests.py scripts/smart-test.py scripts/coverage-monitor.py"
    - "mkdir -p test-templates tests reports"
    - "pip install pytest pytest-cov pytest-mock --quiet"

  messages:
    - "ğŸ‰ æµ‹è¯•æ¡†æ¶æ¨¡å—å®‰è£…å®Œæˆï¼"
    - "ğŸ§ª æµ‹è¯•è¿è¡Œå™¨å’Œè¦†ç›–ç‡ç›‘æ§å·²å°±ç»ª"
    - "ğŸš€ è¿è¡Œ python scripts/run_tests.py å¼€å§‹æµ‹è¯•"
    - "ğŸ“Š ä½¿ç”¨ python scripts/coverage-monitor.py ç›‘æ§è¦†ç›–ç‡"
    - "ğŸ“ æŸ¥çœ‹ test-templates/ ç›®å½•è·å–æµ‹è¯•æ¨¡æ¿"

# ç³»ç»Ÿè¦æ±‚
requirements:
  python: ">=3.11"
  pip_packages:
    - "pytest>=7.0.0"
    - "pytest-cov>=4.0.0"
    - "pytest-mock>=3.10.0"
    - "coverage>=7.0.0"

# åŠŸèƒ½ç‰¹æ€§
features:
  - "unit_testing"
  - "integration_testing"
  - "coverage_monitoring"
  - "test_automation"
  - "test_templates"
  - "smart_testing"

# ä¼°ç®—æŒ‡æ ‡
metrics:
  files_count: 10
  install_time_seconds: 45
  setup_complexity: "medium"
  maintenance_effort: "low"

# ä½¿ç”¨å»ºè®®
usage_tips:
  - "å®šæœŸè¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ç¡®ä¿ä»£ç è´¨é‡"
  - "ç»´æŒè‡³å°‘80%çš„æµ‹è¯•è¦†ç›–ç‡"
  - "ä½¿ç”¨æµ‹è¯•æ¨¡æ¿å¿«é€Ÿåˆ›å»ºæ–°æµ‹è¯•"
  - "å…³æ³¨è¦†ç›–ç‡è­¦æŠ¥åŠæ—¶ä¿®å¤é—®é¢˜"

# ç‰ˆæœ¬å†å²
changelog:
  "2.0.0":
    - "æ™ºèƒ½æµ‹è¯•ç­–ç•¥"
    - "å¢å¼ºè¦†ç›–ç‡ç›‘æ§"
    - "æµ‹è¯•æ¨¡æ¿ç³»ç»Ÿ"
  "1.0.0":
    - "åŸºç¡€æµ‹è¯•æ¡†æ¶"
