# =============================================================================
# 🚀 Staging Environment Configuration
# =============================================================================
ENV=staging
APP_NAME="Football Prediction System (Staging)"
APP_VERSION="3.0.0-staging"
DEBUG=false
LOG_LEVEL=info

# API配置
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=2

# CORS配置 - Restricted for staging
CORS_ORIGINS=["https://staging-frontend.football-predict.com"]
CORS_CREDENTIALS=true

# =============================================================================
# 🗄️ 数据库配置 - Staging
# =============================================================================
# These would be populated by CI/CD secrets
DATABASE_URL=${STAGING_DATABASE_URL}
POSTGRES_DB=${STAGING_POSTGRES_DB}
POSTGRES_USER=${STAGING_POSTGRES_USER}
POSTGRES_PASSWORD=${STAGING_POSTGRES_PASSWORD}

# 测试数据库
TEST_DATABASE_URL=${STAGING_TEST_DATABASE_URL}

# =============================================================================
# 🚀 缓存配置 - Staging
# =============================================================================
REDIS_URL=${STAGING_REDIS_URL}
REDIS_HOST=${STAGING_REDIS_HOST}
REDIS_PORT=${STAGING_REDIS_PORT}
REDIS_DB=${STAGING_REDIS_DB}
REDIS_PASSWORD=${STAGING_REDIS_PASSWORD}

# Staging缓存TTL - 平衡性能和数据新鲜度
CACHE_TTL_SHORT=300      # 5分钟
CACHE_TTL_MEDIUM=1800    # 30分钟  
CACHE_TTL_LONG=7200      # 2小时

# =============================================================================
# 🔐 安全配置 - Staging
# =============================================================================
SECRET_KEY=${STAGING_SECRET_KEY}
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# API密钥 - Staging keys from secrets
FOOTBALL_DATA_API_KEY=${STAGING_FOOTBALL_DATA_API_KEY}
OPENAI_API_KEY=${STAGING_OPENAI_API_KEY}

# =============================================================================
# 📊 监控配置 - Staging
# =============================================================================
OTEL_SERVICE_NAME=football-predict-api-staging
OTEL_EXPORTER_OTLP_ENDPOINT=${STAGING_OTEL_ENDPOINT}

PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# =============================================================================
# 🤖 机器学习配置 - Staging
# =============================================================================
MODEL_PATH=/app/models/staging-artifacts
MODEL_VERSION=staging-latest
MODEL_RETRAIN_INTERVAL_HOURS=6

# 特征工程 - Production-like settings
FEATURE_WINDOW_DAYS=90
MIN_MATCHES_FOR_PREDICTION=5

# =============================================================================
# 📦 数据流配置 - Staging
# =============================================================================
PREFECT_API_URL=${STAGING_PREFECT_API_URL}
PREFECT_LOGGING_LEVEL=INFO

DATA_UPDATE_INTERVAL_MINUTES=30
MAX_CONCURRENT_REQUESTS=8

# =============================================================================
# 🐳 Docker配置 - Staging
# =============================================================================
COMPOSE_PROJECT_NAME=football-predict-staging
DOCKER_REGISTRY=ghcr.io

# =============================================================================
# 🧪 测试配置 - Staging
# =============================================================================
TESTING=false
PYTEST_TIMEOUT=180
COVERAGE_THRESHOLD=70

# =============================================================================
# 🚀 Staging特定配置
# =============================================================================
# 性能配置
WORKER_MEMORY_LIMIT=1Gi
WORKER_CPU_LIMIT=1000m

# 数据保留策略
LOG_RETENTION_DAYS=30
METRICS_RETENTION_DAYS=90

# 健康检查配置
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# 限流配置
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_BURST=100

# 监控告警
ENABLE_ALERTING=true
ALERT_THRESHOLD_ERROR_RATE=5  # 5% error rate threshold
ALERT_THRESHOLD_RESPONSE_TIME=2000  # 2 seconds response time threshold 