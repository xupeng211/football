# =============================================================================
# 🏭 Production Environment Configuration
# =============================================================================
ENV=production
APP_NAME="Football Prediction System"
APP_VERSION="3.0.0"
DEBUG=false
LOG_LEVEL=warning

# API配置 - Production optimized
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# CORS配置 - Strict for production
CORS_ORIGINS=["https://football-predict.com", "https://app.football-predict.com"]
CORS_CREDENTIALS=true

# =============================================================================
# 🗄️ 数据库配置 - Production
# =============================================================================
# All values from secure environment variables/secrets
DATABASE_URL=${PRODUCTION_DATABASE_URL}
POSTGRES_DB=${PRODUCTION_POSTGRES_DB}
POSTGRES_USER=${PRODUCTION_POSTGRES_USER}
POSTGRES_PASSWORD=${PRODUCTION_POSTGRES_PASSWORD}

# 测试数据库 - Separate production testing instance
TEST_DATABASE_URL=${PRODUCTION_TEST_DATABASE_URL}

# =============================================================================
# 🚀 缓存配置 - Production
# =============================================================================
REDIS_URL=${PRODUCTION_REDIS_URL}
REDIS_HOST=${PRODUCTION_REDIS_HOST}
REDIS_PORT=${PRODUCTION_REDIS_PORT}
REDIS_DB=${PRODUCTION_REDIS_DB}
REDIS_PASSWORD=${PRODUCTION_REDIS_PASSWORD}

# Production缓存TTL - 性能优化
CACHE_TTL_SHORT=600      # 10分钟
CACHE_TTL_MEDIUM=3600    # 1小时  
CACHE_TTL_LONG=86400     # 24小时

# =============================================================================
# 🔐 安全配置 - Production
# =============================================================================
SECRET_KEY=${PRODUCTION_SECRET_KEY}
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# API密钥 - Production keys from secrets manager
FOOTBALL_DATA_API_KEY=${PRODUCTION_FOOTBALL_DATA_API_KEY}
OPENAI_API_KEY=${PRODUCTION_OPENAI_API_KEY}

# =============================================================================
# 📊 监控配置 - Production
# =============================================================================
OTEL_SERVICE_NAME=football-predict-api
OTEL_EXPORTER_OTLP_ENDPOINT=${PRODUCTION_OTEL_ENDPOINT}

PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# =============================================================================
# 🤖 机器学习配置 - Production
# =============================================================================
MODEL_PATH=/app/models/production-artifacts
MODEL_VERSION=production-v3.0.0
MODEL_RETRAIN_INTERVAL_HOURS=24

# 特征工程 - Production settings
FEATURE_WINDOW_DAYS=90
MIN_MATCHES_FOR_PREDICTION=5

# =============================================================================
# 📦 数据流配置 - Production
# =============================================================================
PREFECT_API_URL=${PRODUCTION_PREFECT_API_URL}
PREFECT_LOGGING_LEVEL=WARNING

DATA_UPDATE_INTERVAL_MINUTES=60
MAX_CONCURRENT_REQUESTS=20

# =============================================================================
# 🐳 Docker配置 - Production
# =============================================================================
COMPOSE_PROJECT_NAME=football-predict-production
DOCKER_REGISTRY=ghcr.io

# =============================================================================
# 🧪 测试配置 - Production
# =============================================================================
TESTING=false
PYTEST_TIMEOUT=300
COVERAGE_THRESHOLD=80

# =============================================================================
# 🏭 Production优化配置
# =============================================================================
# 性能配置
WORKER_MEMORY_LIMIT=2Gi
WORKER_CPU_LIMIT=2000m
WORKER_MEMORY_REQUEST=1Gi
WORKER_CPU_REQUEST=1000m

# 扩展配置
MIN_REPLICAS=3
MAX_REPLICAS=10
TARGET_CPU_UTILIZATION=70

# 数据保留策略
LOG_RETENTION_DAYS=90
METRICS_RETENTION_DAYS=365
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years for compliance

# 健康检查配置 - 严格的生产配置
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=5s
HEALTH_CHECK_RETRIES=3
STARTUP_PROBE_DELAY=60s

# 限流配置 - 保护生产系统
RATE_LIMIT_REQUESTS_PER_MINUTE=5000
RATE_LIMIT_BURST=500
RATE_LIMIT_WHITELIST=${PRODUCTION_RATE_LIMIT_WHITELIST}

# 安全配置
ENABLE_SECURITY_HEADERS=true
ENABLE_CSRF_PROTECTION=true
ENABLE_RATE_LIMITING=true
ENABLE_REQUEST_LOGGING=true

# 监控告警 - 严格的生产阈值
ENABLE_ALERTING=true
ALERT_THRESHOLD_ERROR_RATE=1  # 1% error rate threshold
ALERT_THRESHOLD_RESPONSE_TIME=1000  # 1 second response time threshold
ALERT_THRESHOLD_MEMORY_USAGE=85  # 85% memory usage threshold
ALERT_THRESHOLD_CPU_USAGE=80  # 80% CPU usage threshold

# 备份配置
ENABLE_AUTOMATED_BACKUPS=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# 合规性配置
ENABLE_AUDIT_LOGGING=true
ENABLE_DATA_ENCRYPTION=true
ENABLE_PII_PROTECTION=true

# 灾难恢复
ENABLE_CROSS_REGION_BACKUP=true
RTO_TARGET_MINUTES=60  # Recovery Time Objective
RPO_TARGET_MINUTES=15  # Recovery Point Objective 