[1;33mInstalling dependencies...[0m
pip install -U pip uv
Requirement already satisfied: pip in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (25.2)
Requirement already satisfied: uv in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (0.8.13)
pip install -r requirements.txt
Requirement already satisfied: fastapi==0.110.3 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 2)) (0.110.3)
Requirement already satisfied: uvicorn==0.30.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from uvicorn[standard]==0.30.1->-r requirements.txt (line 3)) (0.30.1)
Requirement already satisfied: pydantic==2.8.2 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 4)) (2.8.2)
Requirement already satisfied: pydantic-settings==2.3.3 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 5)) (2.3.3)
Requirement already satisfied: numpy==1.26.4 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 8)) (1.26.4)
Requirement already satisfied: pandas==2.2.2 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 9)) (2.2.2)
Requirement already satisfied: scipy==1.13.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 10)) (1.13.1)
Requirement already satisfied: scikit-learn==1.4.2 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 11)) (1.4.2)
Requirement already satisfied: xgboost==2.0.3 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 12)) (2.0.3)
Requirement already satisfied: SQLAlchemy==2.0.31 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 15)) (2.0.31)
Requirement already satisfied: alembic==1.13.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 16)) (1.13.1)
Requirement already satisfied: psycopg2-binary==2.9.9 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 17)) (2.9.9)
Requirement already satisfied: aiosqlite==0.20.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 18)) (0.20.0)
Requirement already satisfied: python-dotenv==1.0.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 21)) (1.0.1)
Requirement already satisfied: httpx==0.27.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 22)) (0.27.0)
Requirement already satisfied: requests==2.32.3 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 23)) (2.32.3)
Requirement already satisfied: types-requests==2.32.0.20240712 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 24)) (2.32.0.20240712)
Requirement already satisfied: types-urllib3==1.26.25.14 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 25)) (1.26.25.14)
Requirement already satisfied: pytest==8.2.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 28)) (8.2.1)
Requirement already satisfied: pytest-cov==5.0.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 29)) (5.0.0)
Requirement already satisfied: mypy==1.10.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 30)) (1.10.0)
Requirement already satisfied: ruff==0.5.5 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 31)) (0.5.5)
Requirement already satisfied: bandit==1.7.9 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from -r requirements.txt (line 32)) (1.7.9)
Requirement already satisfied: starlette<0.38.0,>=0.37.2 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from fastapi==0.110.3->-r requirements.txt (line 2)) (0.37.2)
Requirement already satisfied: typing-extensions>=4.8.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from fastapi==0.110.3->-r requirements.txt (line 2)) (4.14.1)
Requirement already satisfied: annotated-types>=0.4.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pydantic==2.8.2->-r requirements.txt (line 4)) (0.7.0)
Requirement already satisfied: pydantic-core==2.20.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pydantic==2.8.2->-r requirements.txt (line 4)) (2.20.1)
Requirement already satisfied: click>=7.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from uvicorn==0.30.1->uvicorn[standard]==0.30.1->-r requirements.txt (line 3)) (8.1.8)
Requirement already satisfied: h11>=0.8 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from uvicorn==0.30.1->uvicorn[standard]==0.30.1->-r requirements.txt (line 3)) (0.16.0)
Requirement already satisfied: python-dateutil>=2.8.2 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pandas==2.2.2->-r requirements.txt (line 9)) (2.9.0.post0)
Requirement already satisfied: pytz>=2020.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pandas==2.2.2->-r requirements.txt (line 9)) (2024.2)
Requirement already satisfied: tzdata>=2022.7 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pandas==2.2.2->-r requirements.txt (line 9)) (2025.2)
Requirement already satisfied: joblib>=1.2.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from scikit-learn==1.4.2->-r requirements.txt (line 11)) (1.5.1)
Requirement already satisfied: threadpoolctl>=2.0.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from scikit-learn==1.4.2->-r requirements.txt (line 11)) (3.6.0)
Requirement already satisfied: greenlet!=0.4.17 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from SQLAlchemy==2.0.31->-r requirements.txt (line 15)) (3.2.4)
Requirement already satisfied: Mako in /home/user/.local/lib/python3.11/site-packages (from alembic==1.13.1->-r requirements.txt (line 16)) (1.3.10)
Requirement already satisfied: anyio in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from httpx==0.27.0->-r requirements.txt (line 22)) (4.10.0)
Requirement already satisfied: certifi in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from httpx==0.27.0->-r requirements.txt (line 22)) (2025.8.3)
Requirement already satisfied: httpcore==1.* in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from httpx==0.27.0->-r requirements.txt (line 22)) (1.0.9)
Requirement already satisfied: idna in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from httpx==0.27.0->-r requirements.txt (line 22)) (3.10)
Requirement already satisfied: sniffio in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from httpx==0.27.0->-r requirements.txt (line 22)) (1.3.1)
Requirement already satisfied: charset-normalizer<4,>=2 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from requests==2.32.3->-r requirements.txt (line 23)) (3.4.3)
Requirement already satisfied: urllib3<3,>=1.21.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from requests==2.32.3->-r requirements.txt (line 23)) (2.0.7)
Requirement already satisfied: iniconfig in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pytest==8.2.1->-r requirements.txt (line 28)) (2.1.0)
Requirement already satisfied: packaging in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pytest==8.2.1->-r requirements.txt (line 28)) (24.2)
Requirement already satisfied: pluggy<2.0,>=1.5 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pytest==8.2.1->-r requirements.txt (line 28)) (1.6.0)
Requirement already satisfied: coverage>=5.2.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from coverage[toml]>=5.2.1->pytest-cov==5.0.0->-r requirements.txt (line 29)) (7.10.5)
Requirement already satisfied: mypy-extensions>=1.0.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from mypy==1.10.0->-r requirements.txt (line 30)) (1.1.0)
Requirement already satisfied: PyYAML>=5.3.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from bandit==1.7.9->-r requirements.txt (line 32)) (6.0.1)
Requirement already satisfied: stevedore>=1.20.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from bandit==1.7.9->-r requirements.txt (line 32)) (5.4.1)
Requirement already satisfied: rich in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from bandit==1.7.9->-r requirements.txt (line 32)) (13.9.4)
Requirement already satisfied: httptools>=0.5.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from uvicorn[standard]==0.30.1->-r requirements.txt (line 3)) (0.6.4)
Requirement already satisfied: uvloop!=0.15.0,!=0.15.1,>=0.14.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from uvicorn[standard]==0.30.1->-r requirements.txt (line 3)) (0.21.0)
Requirement already satisfied: watchfiles>=0.13 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from uvicorn[standard]==0.30.1->-r requirements.txt (line 3)) (1.1.0)
Requirement already satisfied: websockets>=10.4 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from uvicorn[standard]==0.30.1->-r requirements.txt (line 3)) (12.0)
Requirement already satisfied: six>=1.5 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from python-dateutil>=2.8.2->pandas==2.2.2->-r requirements.txt (line 9)) (1.17.0)
Requirement already satisfied: pbr>=2.0.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from stevedore>=1.20.0->bandit==1.7.9->-r requirements.txt (line 32)) (7.0.0)
Requirement already satisfied: setuptools in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pbr>=2.0.0->stevedore>=1.20.0->bandit==1.7.9->-r requirements.txt (line 32)) (80.9.0)
Requirement already satisfied: MarkupSafe>=0.9.2 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from Mako->alembic==1.13.1->-r requirements.txt (line 16)) (3.0.2)
Requirement already satisfied: markdown-it-py>=2.2.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from rich->bandit==1.7.9->-r requirements.txt (line 32)) (3.0.0)
Requirement already satisfied: pygments<3.0.0,>=2.13.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from rich->bandit==1.7.9->-r requirements.txt (line 32)) (2.19.2)
Requirement already satisfied: mdurl~=0.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from markdown-it-py>=2.2.0->rich->bandit==1.7.9->-r requirements.txt (line 32)) (0.1.2)
pip install -e .
Obtaining file:///home/user/projects/football-predict-system
  Installing build dependencies: started
  Installing build dependencies: finished with status 'done'
  Checking if build backend supports build_editable: started
  Checking if build backend supports build_editable: finished with status 'done'
  Getting requirements to build editable: started
  Getting requirements to build editable: finished with status 'done'
  Preparing editable metadata (pyproject.toml): started
  Preparing editable metadata (pyproject.toml): finished with status 'done'
Requirement already satisfied: fastapi in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (0.110.3)
Requirement already satisfied: uvicorn in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (0.30.1)
Requirement already satisfied: pydantic in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (2.8.2)
Requirement already satisfied: pydantic-settings in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (2.3.3)
Requirement already satisfied: xgboost in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (2.0.3)
Requirement already satisfied: pandas in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (2.2.2)
Requirement already satisfied: numpy in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (1.26.4)
Requirement already satisfied: psycopg[binary] in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (3.2.9)
Requirement already satisfied: sqlalchemy in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (2.0.31)
Requirement already satisfied: prefect in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (2.20.21)
Requirement already satisfied: prometheus-client in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (0.19.0)
Requirement already satisfied: httpx in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (0.27.0)
Requirement already satisfied: beautifulsoup4 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (4.12.2)
Requirement already satisfied: structlog in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (23.2.0)
Requirement already satisfied: pytest in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (8.2.1)
Requirement already satisfied: pytest-cov in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from football-predictor==0.1.0) (5.0.0)
Requirement already satisfied: soupsieve>1.2 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from beautifulsoup4->football-predictor==0.1.0) (2.7)
Requirement already satisfied: starlette<0.38.0,>=0.37.2 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from fastapi->football-predictor==0.1.0) (0.37.2)
Requirement already satisfied: typing-extensions>=4.8.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from fastapi->football-predictor==0.1.0) (4.14.1)
Requirement already satisfied: annotated-types>=0.4.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pydantic->football-predictor==0.1.0) (0.7.0)
Requirement already satisfied: pydantic-core==2.20.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pydantic->football-predictor==0.1.0) (2.20.1)
Requirement already satisfied: anyio<5,>=3.4.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from starlette<0.38.0,>=0.37.2->fastapi->football-predictor==0.1.0) (4.10.0)
Requirement already satisfied: idna>=2.8 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from anyio<5,>=3.4.0->starlette<0.38.0,>=0.37.2->fastapi->football-predictor==0.1.0) (3.10)
Requirement already satisfied: sniffio>=1.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from anyio<5,>=3.4.0->starlette<0.38.0,>=0.37.2->fastapi->football-predictor==0.1.0) (1.3.1)
Requirement already satisfied: certifi in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from httpx->football-predictor==0.1.0) (2025.8.3)
Requirement already satisfied: httpcore==1.* in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from httpx->football-predictor==0.1.0) (1.0.9)
Requirement already satisfied: h11>=0.16 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from httpcore==1.*->httpx->football-predictor==0.1.0) (0.16.0)
Requirement already satisfied: python-dateutil>=2.8.2 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pandas->football-predictor==0.1.0) (2.9.0.post0)
Requirement already satisfied: pytz>=2020.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pandas->football-predictor==0.1.0) (2024.2)
Requirement already satisfied: tzdata>=2022.7 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pandas->football-predictor==0.1.0) (2025.2)
Requirement already satisfied: six>=1.5 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from python-dateutil>=2.8.2->pandas->football-predictor==0.1.0) (1.17.0)
Requirement already satisfied: aiosqlite<1.0.0,>=0.17.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (0.20.0)
Requirement already satisfied: alembic<2.0.0,>=1.7.5 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (1.13.1)
Requirement already satisfied: apprise<2.0.0,>=1.8.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (1.9.4)
Requirement already satisfied: asyncpg<0.30.0,>=0.23 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (0.29.0)
Requirement already satisfied: click<8.2,>=8.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (8.1.8)
Requirement already satisfied: cryptography>=36.0.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (42.0.5)
Requirement already satisfied: dateparser<2.0.0,>=1.1.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (1.2.2)
Requirement already satisfied: docker<8.0,>=4.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (6.1.3)
Requirement already satisfied: graphviz>=0.20.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (0.21)
Requirement already satisfied: jinja2<4.0.0,>=3.0.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (3.1.6)
Requirement already satisfied: jinja2-humanize-extension>=0.4.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (0.4.0)
Requirement already satisfied: humanize<5.0.0,>=4.9.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (4.12.3)
Requirement already satisfied: kubernetes<32.0.0,>=24.2.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (29.0.0)
Requirement already satisfied: readchar<5.0.0,>=4.0.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (4.2.1)
Requirement already satisfied: typer!=0.12.2,<0.17.0,>=0.12.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (0.15.4)
Requirement already satisfied: asgi-lifespan<3.0,>=1.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (2.1.0)
Requirement already satisfied: cachetools<7.0,>=5.3 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (5.5.2)
Requirement already satisfied: cloudpickle<4.0,>=2.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (3.1.1)
Requirement already satisfied: coolname<3.0.0,>=1.0.4 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (2.2.0)
Requirement already satisfied: croniter<6.0.0,>=1.0.12 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (2.0.7)
Requirement already satisfied: fsspec>=2022.5.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (2025.7.0)
Requirement already satisfied: exceptiongroup>=1.2.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (1.3.0)
Requirement already satisfied: griffe<2.0.0,>=0.49.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (1.12.1)
Requirement already satisfied: importlib-resources<6.5.0,>=6.1.3 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (6.4.5)
Requirement already satisfied: jsonpatch<2.0,>=1.32 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (1.33)
Requirement already satisfied: jsonschema<5.0.0,>=4.0.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (4.25.0)
Requirement already satisfied: orjson<4.0,>=3.7 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (3.11.1)
Requirement already satisfied: packaging<25.1,>=21.3 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (24.2)
Requirement already satisfied: pathspec>=0.8.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (0.12.1)
Requirement already satisfied: python-slugify<9.0,>=5.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (8.0.4)
Requirement already satisfied: pyyaml<7.0.0,>=5.4.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (6.0.1)
Requirement already satisfied: rfc3339-validator<0.2.0,>=0.1.4 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (0.1.4)
Requirement already satisfied: rich<15.0,>=11.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (13.9.4)
Requirement already satisfied: ruamel.yaml>=0.17.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (0.18.14)
Requirement already satisfied: toml>=0.10.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (0.10.2)
Requirement already satisfied: ujson<6.0.0,>=5.8.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (5.10.0)
Requirement already satisfied: websockets<14.0,>=10.4 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (12.0)
Requirement already satisfied: itsdangerous in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (2.2.0)
Requirement already satisfied: python-multipart>=0.0.7 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (0.0.20)
Requirement already satisfied: pendulum<3.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from prefect->football-predictor==0.1.0) (2.1.2)
Requirement already satisfied: Mako in /home/user/.local/lib/python3.11/site-packages (from alembic<2.0.0,>=1.7.5->prefect->football-predictor==0.1.0) (1.3.10)
Requirement already satisfied: requests in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from apprise<2.0.0,>=1.8.0->prefect->football-predictor==0.1.0) (2.32.3)
Requirement already satisfied: requests-oauthlib in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from apprise<2.0.0,>=1.8.0->prefect->football-predictor==0.1.0) (2.0.0)
Requirement already satisfied: markdown in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from apprise<2.0.0,>=1.8.0->prefect->football-predictor==0.1.0) (3.8.2)
Requirement already satisfied: async-timeout>=4.0.3 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from asyncpg<0.30.0,>=0.23->prefect->football-predictor==0.1.0) (5.0.1)
Requirement already satisfied: regex>=2024.9.11 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from dateparser<2.0.0,>=1.1.1->prefect->football-predictor==0.1.0) (2025.7.34)
Requirement already satisfied: tzlocal>=0.2 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from dateparser<2.0.0,>=1.1.1->prefect->football-predictor==0.1.0) (5.3.1)
Requirement already satisfied: urllib3>=1.26.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from docker<8.0,>=4.0->prefect->football-predictor==0.1.0) (2.0.7)
Requirement already satisfied: websocket-client>=0.32.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from docker<8.0,>=4.0->prefect->football-predictor==0.1.0) (1.8.0)
Requirement already satisfied: colorama>=0.4 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from griffe<2.0.0,>=0.49.0->prefect->football-predictor==0.1.0) (0.4.6)
Requirement already satisfied: MarkupSafe>=2.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from jinja2<4.0.0,>=3.0.0->prefect->football-predictor==0.1.0) (3.0.2)
Requirement already satisfied: jsonpointer>=1.9 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from jsonpatch<2.0,>=1.32->prefect->football-predictor==0.1.0) (3.0.0)
Requirement already satisfied: attrs>=22.2.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from jsonschema<5.0.0,>=4.0.0->prefect->football-predictor==0.1.0) (25.3.0)
Requirement already satisfied: jsonschema-specifications>=2023.03.6 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from jsonschema<5.0.0,>=4.0.0->prefect->football-predictor==0.1.0) (2025.4.1)
Requirement already satisfied: referencing>=0.28.4 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from jsonschema<5.0.0,>=4.0.0->prefect->football-predictor==0.1.0) (0.36.2)
Requirement already satisfied: rpds-py>=0.7.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from jsonschema<5.0.0,>=4.0.0->prefect->football-predictor==0.1.0) (0.27.0)
Requirement already satisfied: google-auth>=1.0.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from kubernetes<32.0.0,>=24.2.0->prefect->football-predictor==0.1.0) (2.40.3)
Requirement already satisfied: oauthlib>=3.2.2 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from kubernetes<32.0.0,>=24.2.0->prefect->football-predictor==0.1.0) (3.3.1)
Requirement already satisfied: pytzdata>=2020.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pendulum<3.0->prefect->football-predictor==0.1.0) (2020.1)
Requirement already satisfied: email-validator>=2.0.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pydantic[email]!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.10.0->prefect->football-predictor==0.1.0) (2.2.0)
Requirement already satisfied: text-unidecode>=1.3 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from python-slugify<9.0,>=5.0->prefect->football-predictor==0.1.0) (1.3)
Requirement already satisfied: markdown-it-py>=2.2.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from rich<15.0,>=11.0->prefect->football-predictor==0.1.0) (3.0.0)
Requirement already satisfied: pygments<3.0.0,>=2.13.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from rich<15.0,>=11.0->prefect->football-predictor==0.1.0) (2.19.2)
Requirement already satisfied: greenlet!=0.4.17 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from sqlalchemy->football-predictor==0.1.0) (3.2.4)
Requirement already satisfied: shellingham>=1.3.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from typer!=0.12.2,<0.17.0,>=0.12.0->prefect->football-predictor==0.1.0) (1.5.4)
Requirement already satisfied: cffi>=1.12 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from cryptography>=36.0.1->prefect->football-predictor==0.1.0) (1.17.1)
Requirement already satisfied: pycparser in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from cffi>=1.12->cryptography>=36.0.1->prefect->football-predictor==0.1.0) (2.22)
Requirement already satisfied: dnspython>=2.0.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from email-validator>=2.0.0->pydantic[email]!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.10.0->prefect->football-predictor==0.1.0) (2.7.0)
Requirement already satisfied: pyasn1-modules>=0.2.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from google-auth>=1.0.1->kubernetes<32.0.0,>=24.2.0->prefect->football-predictor==0.1.0) (0.4.2)
Requirement already satisfied: rsa<5,>=3.1.4 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from google-auth>=1.0.1->kubernetes<32.0.0,>=24.2.0->prefect->football-predictor==0.1.0) (4.9.1)
Requirement already satisfied: pyasn1>=0.1.3 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from rsa<5,>=3.1.4->google-auth>=1.0.1->kubernetes<32.0.0,>=24.2.0->prefect->football-predictor==0.1.0) (0.6.1)
Requirement already satisfied: h2<5,>=3 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from httpx[http2]!=0.23.2,>=0.23->prefect->football-predictor==0.1.0) (4.3.0)
Requirement already satisfied: hyperframe<7,>=6.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from h2<5,>=3->httpx[http2]!=0.23.2,>=0.23->prefect->football-predictor==0.1.0) (6.1.0)
Requirement already satisfied: hpack<5,>=4.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from h2<5,>=3->httpx[http2]!=0.23.2,>=0.23->prefect->football-predictor==0.1.0) (4.1.0)
Requirement already satisfied: mdurl~=0.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from markdown-it-py>=2.2.0->rich<15.0,>=11.0->prefect->football-predictor==0.1.0) (0.1.2)
Requirement already satisfied: charset-normalizer<4,>=2 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from requests->apprise<2.0.0,>=1.8.0->prefect->football-predictor==0.1.0) (3.4.3)
Requirement already satisfied: ruamel.yaml.clib>=0.2.7 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from ruamel.yaml>=0.17.0->prefect->football-predictor==0.1.0) (0.2.12)
Requirement already satisfied: psycopg-binary==3.2.9 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from psycopg[binary]->football-predictor==0.1.0) (3.2.9)
Requirement already satisfied: python-dotenv>=0.21.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pydantic-settings->football-predictor==0.1.0) (1.0.1)
Requirement already satisfied: iniconfig in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pytest->football-predictor==0.1.0) (2.1.0)
Requirement already satisfied: pluggy<2.0,>=1.5 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pytest->football-predictor==0.1.0) (1.6.0)
Requirement already satisfied: coverage>=5.2.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from coverage[toml]>=5.2.1->pytest-cov->football-predictor==0.1.0) (7.10.5)
Requirement already satisfied: scipy in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from xgboost->football-predictor==0.1.0) (1.13.1)
Building wheels for collected packages: football-predictor
  Building editable for football-predictor (pyproject.toml): started
  Building editable for football-predictor (pyproject.toml): finished with status 'done'
  Created wheel for football-predictor: filename=football_predictor-0.1.0-0.editable-py3-none-any.whl size=3065 sha256=ab6711848fe30f214c4c71798e79bc436636ec444d4e87cd3d213e11be5aa4cc
  Stored in directory: /tmp/pip-ephem-wheel-cache-_dppmdup/wheels/64/99/10/153d834cda61dfe48cf684aaa01b5a09f060b41900d02c9999
Successfully built football-predictor
Installing collected packages: football-predictor
  Attempting uninstall: football-predictor
    Found existing installation: football-predictor 0.1.0
    Uninstalling football-predictor-0.1.0:
      Successfully uninstalled football-predictor-0.1.0
Successfully installed football-predictor-0.1.0
pip install pre-commit ruff mypy pytest pytest-cov bandit
Requirement already satisfied: pre-commit in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (4.3.0)
Requirement already satisfied: ruff in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (0.5.5)
Requirement already satisfied: mypy in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (1.10.0)
Requirement already satisfied: pytest in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (8.2.1)
Requirement already satisfied: pytest-cov in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (5.0.0)
Requirement already satisfied: bandit in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (1.7.9)
Requirement already satisfied: cfgv>=2.0.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pre-commit) (3.4.0)
Requirement already satisfied: identify>=1.0.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pre-commit) (2.6.13)
Requirement already satisfied: nodeenv>=0.11.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pre-commit) (1.9.1)
Requirement already satisfied: pyyaml>=5.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pre-commit) (6.0.1)
Requirement already satisfied: virtualenv>=20.10.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pre-commit) (20.34.0)
Requirement already satisfied: typing-extensions>=4.1.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from mypy) (4.14.1)
Requirement already satisfied: mypy-extensions>=1.0.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from mypy) (1.1.0)
Requirement already satisfied: iniconfig in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pytest) (2.1.0)
Requirement already satisfied: packaging in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pytest) (24.2)
Requirement already satisfied: pluggy<2.0,>=1.5 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pytest) (1.6.0)
Requirement already satisfied: coverage>=5.2.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from coverage[toml]>=5.2.1->pytest-cov) (7.10.5)
Requirement already satisfied: stevedore>=1.20.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from bandit) (5.4.1)
Requirement already satisfied: rich in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from bandit) (13.9.4)
Requirement already satisfied: pbr>=2.0.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from stevedore>=1.20.0->bandit) (7.0.0)
Requirement already satisfied: setuptools in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from pbr>=2.0.0->stevedore>=1.20.0->bandit) (80.9.0)
Requirement already satisfied: distlib<1,>=0.3.7 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from virtualenv>=20.10.0->pre-commit) (0.4.0)
Requirement already satisfied: filelock<4,>=3.12.2 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from virtualenv>=20.10.0->pre-commit) (3.16.1)
Requirement already satisfied: platformdirs<5,>=3.9.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from virtualenv>=20.10.0->pre-commit) (4.3.8)
Requirement already satisfied: markdown-it-py>=2.2.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from rich->bandit) (3.0.0)
Requirement already satisfied: pygments<3.0.0,>=2.13.0 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from rich->bandit) (2.19.2)
Requirement already satisfied: mdurl~=0.1 in /home/user/.pyenv/versions/3.11.9/lib/python3.11/site-packages (from markdown-it-py>=2.2.0->rich->bandit) (0.1.2)
[1;32m✅ Dependencies installed[0m
[1;33mFormatting code...[0m
ruff format .
warning: The top-level linter settings are deprecated in favour of their counterparts in the `lint` section. Please update the following options in `pyproject.toml`:
  - 'ignore' -> 'lint.ignore'
  - 'select' -> 'lint.select'
1 file reformatted, 53 files left unchanged
ruff check --fix .
warning: The top-level linter settings are deprecated in favour of their counterparts in the `lint` section. Please update the following options in `pyproject.toml`:
  - 'ignore' -> 'lint.ignore'
  - 'select' -> 'lint.select'
apps/api/routers/health.py:32:17: RUF002 Docstring contains ambiguous `：` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   |
30 |     健康检查端点
31 |
32 |     检查系统各组件的健康状态：
   |                             ^^ RUF002
33 |     - API服务状态
34 |     - 数据库连接
   |

apps/api/routers/health.py:58:20: RUF003 Comment contains ambiguous `，` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   |
56 |         components["prefect"] = {"status": "unknown", "message": "TODO: 实现Prefect连接检查"}
57 |
58 |         # 如果任何组件不健康，整体状态为不健康
   |                             ^^ RUF003
59 |         if any(comp.get("status") == "unhealthy" for comp in components.values()):
60 |             overall_status = "unhealthy"
   |

apps/api/routers/health.py:71:9: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
   |
69 |     except Exception as e:
70 |         logger.error("健康检查失败", exc=str(e))
71 |         raise HTTPException(status_code=503, detail="健康检查失败")
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
   |

apps/api/routers/metrics.py:47:18: RUF002 Docstring contains ambiguous `，` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   |
45 |     获取系统指标 - Prometheus格式
46 |
47 |     提供系统运行状态的关键指标，包括：
   |                               ^^ RUF002
48 |     - API请求统计
49 |     - 模型预测统计
   |

apps/api/routers/metrics.py:47:21: RUF002 Docstring contains ambiguous `：` (FULLWIDTH COLON). Did you mean `:` (COLON)?
   |
45 |     获取系统指标 - Prometheus格式
46 |
47 |     提供系统运行状态的关键指标，包括：
   |                                     ^^ RUF002
48 |     - API请求统计
49 |     - 模型预测统计
   |

apps/api/routers/predictions.py:106:9: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
104 |     except Exception as e:
105 |         logger.error("预测失败", exc=str(e), trace_id=trace_id)
106 |         raise HTTPException(status_code=500, detail=f"预测失败: {e!s}")
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
    |

apps/api/routers/predictions.py:144:9: B904 Within an `except` clause, raise exceptions with `raise ... from err` or `raise ... from None` to distinguish them from errors in exception handling
    |
142 |     except Exception as e:
143 |         logger.error("批量预测失败", exc=str(e))
144 |         raise HTTPException(status_code=500, detail=f"批量预测失败: {e!s}")
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ B904
    |

apps/backtest/engine.py:174:15: RUF003 Comment contains ambiguous `（` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
    |
172 |         logger.info("生成预测结果", matches=len(test_data))
173 |
174 |         # 提取特征（需要与训练时保持一致）
    |                   ^^ RUF003
175 |         # TODO: 实现特征提取逻辑
176 |         feature_columns = [
    |

apps/backtest/engine.py:174:26: RUF003 Comment contains ambiguous `）` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
    |
172 |         logger.info("生成预测结果", matches=len(test_data))
173 |
174 |         # 提取特征（需要与训练时保持一致）
    |                                         ^^ RUF003
175 |         # TODO: 实现特征提取逻辑
176 |         feature_columns = [
    |

apps/backtest/engine.py:195:15: RUF003 Comment contains ambiguous `（` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
    |
193 |         features = test_data[feature_columns].fillna(0)
194 |
195 |         # 生成预测（占位实现）
    |                   ^^ RUF003
196 |         # TODO: 使用实际模型进行预测
197 |         # probabilities = model.predict_proba(features)
    |

apps/backtest/engine.py:195:20: RUF003 Comment contains ambiguous `）` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
    |
193 |         features = test_data[feature_columns].fillna(0)
194 |
195 |         # 生成预测（占位实现）
    |                             ^^ RUF003
196 |         # TODO: 使用实际模型进行预测
197 |         # probabilities = model.predict_proba(features)
    |

apps/backtest/engine.py:283:19: RUF003 Comment contains ambiguous `，` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
    |
281 |         away_score = row.get("away_score", 0)
282 |
283 |         # 如果没有比分数据，生成随机结果用于演示
    |                           ^^ RUF003
284 |         if pd.isna(home_score) or pd.isna(away_score):
285 |             return np.random.choice([0, 1, 2])  # 随机结果
    |

apps/backtest/engine.py:316:18: RUF003 Comment contains ambiguous `：` (FULLWIDTH COLON). Did you mean `:` (COLON)?
    |
315 |         for class_idx, class_name in enumerate(class_names):
316 |             # 精确率：预测为该类别且正确的 / 预测为该类别的总数
    |                     ^^ RUF003
317 |             predicted_as_class = sum(1 for p in predicted_results if p == class_idx)
318 |             correct_as_class = sum(
    |

apps/backtest/engine.py:325:18: RUF003 Comment contains ambiguous `：` (FULLWIDTH COLON). Did you mean `:` (COLON)?
    |
323 |             precision = correct_as_class / predicted_as_class if predicted_as_class > 0 else 0
324 |
325 |             # 召回率：预测为该类别且正确的 / 实际为该类别的总数
    |                     ^^ RUF003
326 |             actual_as_class = sum(1 for a in actual_results if a == class_idx)
327 |             recall = correct_as_class / actual_as_class if actual_as_class > 0 else 0
    |

apps/backtest/engine.py:354:36: RUF005 Consider `[0, *daily_pnl]` instead of concatenation
    |
353 |         # 最大回撤
354 |         cumulative_pnl = np.cumsum([0] + daily_pnl)
    |                                    ^^^^^^^^^^^^^^^ RUF005
355 |         running_max = np.maximum.accumulate(cumulative_pnl)
356 |         drawdowns = running_max - cumulative_pnl
    |
    = help: Replace with `[0, *daily_pnl]`

apps/trainer/xgboost_trainer.py:63:25: RUF002 Docstring contains ambiguous `，` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   |
62 |         Args:
63 |             config: 训练配置，None时使用默认配置
   |                             ^^ RUF002
64 |         """
65 |         self.config = config or TrainingConfig()
   |

apps/trainer/xgboost_trainer.py:225:36: RUF001 String contains ambiguous `，` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
    |
223 |         """
224 |         if self.model is None:
225 |             raise ValueError("模型未训练，请先调用train()方法")
    |                                         ^^ RUF001
226 |
227 |         return self.model.predict_proba(features)
    |

apps/trainer/xgboost_trainer.py:240:36: RUF001 String contains ambiguous `，` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
    |
238 |         """
239 |         if self.model is None:
240 |             raise ValueError("模型未训练，请先调用train()方法")
    |                                         ^^ RUF001
241 |
242 |         return self.model.predict(features)
    |

apps/workers/flows/data_collection_flow.py:195:26: RUF002 Docstring contains ambiguous `，` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
    |
194 |     Args:
195 |         target_date: 目标日期，None表示昨天
    |                              ^^ RUF002
196 |         leagues: 联赛列表，None表示所有主要联赛
    |

apps/workers/flows/data_collection_flow.py:196:22: RUF002 Docstring contains ambiguous `，` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
    |
194 |     Args:
195 |         target_date: 目标日期，None表示昨天
196 |         leagues: 联赛列表，None表示所有主要联赛
    |                          ^^ RUF002
197 |
198 |     Returns:
    |

apps/workers/flows/data_collection_flow.py:264:13: RUF003 Comment contains ambiguous `，` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
    |
262 |     total_odds = []
263 |
264 |     # 按周分批处理，避免单次请求过大
    |                   ^^ RUF003
265 |     current_date = start_date
266 |     while current_date <= end_date:
    |

data_pipeline/sources/football_api.py:81:26: RUF002 Docstring contains ambiguous `，` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   |
79 |             start_date: 开始日期
80 |             end_date: 结束日期
81 |             leagues: 联赛列表，None表示所有联赛
   |                              ^^ RUF002
82 |
83 |         Returns:
   |

data_pipeline/sources/football_api.py:149:20: RUF002 Docstring contains ambiguous `（` (FULLWIDTH LEFT PARENTHESIS). Did you mean `(` (LEFT PARENTHESIS)?
    |
148 |     def _generate_mock_matches(self, league: str, start_date: date, end_date: date) -> list[Match]:
149 |         """生成模拟比赛数据（仅用于开发阶段）"""
    |                            ^^ RUF002
150 |         matches = []
    |

data_pipeline/sources/football_api.py:149:28: RUF002 Docstring contains ambiguous `）` (FULLWIDTH RIGHT PARENTHESIS). Did you mean `)` (RIGHT PARENTHESIS)?
    |
148 |     def _generate_mock_matches(self, league: str, start_date: date, end_date: date) -> list[Match]:
149 |         """生成模拟比赛数据（仅用于开发阶段）"""
    |                                            ^^ RUF002
150 |         matches = []
    |

data_pipeline/sources/football_api.py:169:17: B007 Loop control variable `i` not used within loop body
    |
167 |         while current_date <= end_date:
168 |             # 每天生成1-3场比赛
169 |             for i in range(1, 3):
    |                 ^ B007
170 |                 if match_counter % 7 == 0:  # 不是每天都有比赛
171 |                     continue
    |
    = help: Rename unused `i` to `_i`

data_pipeline/sources/ingest_odds.py:32:16: UP038 Use `X | Y` in `isinstance` call instead of `(X, Y)`
   |
31 |     for key in ["home_odds", "draw_odds", "away_odds"]:
32 |         if not isinstance(record[key], (int, float)) or record[key] <= 0:
   |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ UP038
33 |             logger.warning(f"Skipping record due to invalid odds value for {key}. Record: {record}")
34 |             return False
   |
   = help: Convert to `X | Y`

models/registry.py:184:26: RUF002 Docstring contains ambiguous `，` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
    |
182 |         Args:
183 |             model_id: 模型ID
184 |             version: 模型版本，None表示加载活跃版本
    |                              ^^ RUF002
185 |
186 |         Returns:
    |

tests/conftest.py:9:17: RUF002 Docstring contains ambiguous `，` (FULLWIDTH COMMA). Did you mean `,` (COMMA)?
   |
 8 | def db_available():
 9 |     """检测数据库是否可用，1秒超时"""
   |                          ^^ RUF002
10 |     try:
11 |         default_url = "postgresql://postgres:password@localhost:5432/sports"
   |

Found 132 errors (104 fixed, 28 remaining).
No fixes available (3 hidden fixes can be enabled with the `--unsafe-fixes` option).
make: *** [Makefile:25: fmt] Error 1
